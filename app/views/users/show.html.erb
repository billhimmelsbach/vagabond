<div class="col-xs-3">
  <div class="row">
      <% if @user.image_url == nil%>
        <img src="http://i.imgur.com/ixpF82Y.png" class="img-responsive img-circle">
      <% else %>
        <img src="<%= @user.image_url%>" class="product_img img-responsive img-circle">
      <% end %>
  </div>
  <br>
  <div class="row">
    <h3><%=  @user.first_name %> <%= @user.last_name %> </p>
    <h4>Date Joined: <%= @user.created_at.localtime.strftime("%B #{@user.created_at.day.ordinalize}, %Y") %> </p>
    <h4> <%=  @user.current_city %> </p>
        <% if @user.cities.distinct.count == 1 %>
              <p> You've contributed to <%= @user.cities.distinct.count %> city</p>
              <ul>
              <% @user.cities.distinct.each do |city| %>
                      <li> <%=link_to "#{city.name}", city_path(city) %>:
                      <% if city.posts.where(user_id: @user.id).count == 1 %>
                              You've written <%= city.posts.where(user_id: @user.id).count %> post for this city.
                              </li>
                      <% elsif city.posts.where(user_id: @user.id).count > 1 %>
                              You've written <%= city.posts.where(user_id: @user.id).count %> posts for this city.
                              </li>
                      <% end %>

              <% end %>
        <% elsif @user.cities.distinct.count > 1 %>
              <p> You've contributed to <%= @user.cities.distinct.count %> cities</p>
              <ul>
              <% @user.cities.distinct.each do |city| %>
                    <li> <%=link_to "#{city.name}", city_path(city) %>:
                    <% if city.posts.where(user_id: @user.id).count == 1 %>
                            You've written <u> <%= city.posts.where(user_id: @user.id).count %> post</u> for this city.
                            </li>
                    <% elsif city.posts.where(user_id: @user.id).count > 1 %>
                            You've written <u><%= city.posts.where(user_id: @user.id).count %> posts</u> for this city.
                            </li>
                    <% end %>
                    <br />
              <% end %>
        <% elsif @user.cities.distinct.count < 1 || nil %>
          <p> Wow, You've contributed <u>0</u> posts so far!</p>
          <p> What are you waiting for? To get started, consider posting about your favorite restaurant in a city you adore. </p>
          <p>For us, it's <li> <u><%=link_to "San Francisco","/cities/1" %></u>! </li>
          </p>
        <% end %>
    </ul>
    <br>
    <div>
      <% if current_user != nil && current_user.id == @user.id %>
        <%= button_to "Edit Your Profile", edit_user_path(@user), method: :get, :class=>"ruby-link btn btn-info btn-primary btn-lg" %>
      <% end %>
    </div>
  </div>
</div>

<div class="col-xs-9">
  <%  @posts.each do |post| %>
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4><%= link_to "#{post.title}", "/cities/#{post.city.id}/posts/#{post.id}" %></h4>
      </div>
      <div class="panel-body">
        <p> <%= post.content %> </p>
        <% if current_user != nil && current_user.id == @user.id %>
          <br>
          <div class="row">
            <div class="pull-right">
              <div class = "button-row">
                <%= link_to "Edit Post", "/cities/#{post.city_id}/posts/#{post.id}/edit", method: :get, :class=>"ruby-link btn btn-info btn-primary btn-lg inline" %>
                <%= link_to "Delete Post", "/cities/#{post.city_id}/posts/#{post.id}" , method: :delete, :class=>"ruby-link btn btn-danger inline btn-primary btn-lg inline", data: { confirm: 'Are you sure?' } %>
                <%= link_to 'Test', '#', :class => "btn btn-default", "data-toggle" => "collapse", "data-target" => "delete-confirmation" %>
              </div>
              <div id="delete-confirmation" class="collapse">
              </div>
            </div>
          </div>
        <% end %>
      </div>
      <br>
    </div>
  <% end %>
</div>
